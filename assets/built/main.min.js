/**
 * Forest Edge Ghost Theme JavaScript - Minified Version
 * Snook-inspired interactions and animations
 */
!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){initMobileMenu(),initSmoothScroll(),initShareButtons(),initDonationAnimations(),initImageLazyLoading(),initCircleAnimations(),initPostCardAnimations(),initProgressAnimations(),initHeaderScroll()});function initMobileMenu(){const menuToggle=document.querySelector(".menu-toggle"),mobileNav=document.querySelector(".mobile-nav-overlay"),body=document.body;if(!menuToggle||!mobileNav)return;menuToggle.addEventListener("click",function(){const isActive=mobileNav.classList.contains("active");isActive?(mobileNav.classList.remove("active"),body.classList.remove("menu-open"),menuToggle.setAttribute("aria-expanded","false")):(mobileNav.classList.add("active"),body.classList.add("menu-open"),menuToggle.setAttribute("aria-expanded","true"))}),mobileNav.addEventListener("click",function(e){e.target===mobileNav&&(mobileNav.classList.remove("active"),body.classList.remove("menu-open"),menuToggle.setAttribute("aria-expanded","false"))}),document.addEventListener("keydown",function(e){"Escape"===e.key&&mobileNav.classList.contains("active")&&(mobileNav.classList.remove("active"),body.classList.remove("menu-open"),menuToggle.setAttribute("aria-expanded","false"))})}function initSmoothScroll(){if("undefined"==typeof Lenis||!document.body.classList.contains("smooth-scroll"))return;const lenis=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,infinite:!1});function raf(time){lenis.raf(time),requestAnimationFrame(raf)}requestAnimationFrame(raf),"undefined"!=typeof gsap&&lenis.on("scroll",e=>{gsap.to(window,{duration:0,scrollTo:e.scroll})})}function initShareButtons(){const copyButtons=document.querySelectorAll(".share-copy");copyButtons.forEach(button=>{button.addEventListener("click",function(){const url=this.getAttribute("data-url");navigator.clipboard?navigator.clipboard.writeText(url).then(()=>{showShareFeedback(this,"Link copied!")}).catch(()=>{fallbackCopyToClipboard(url,this)}):fallbackCopyToClipboard(url,this)})});const shareButtons=document.querySelectorAll(".share-btn[href]");shareButtons.forEach(button=>{button.addEventListener("click",function(){const platform=this.classList.contains("share-twitter")?"twitter":this.classList.contains("share-facebook")?"facebook":this.classList.contains("share-linkedin")?"linkedin":"unknown";"undefined"!=typeof gtag&&gtag("event","share",{method:platform,content_type:"article",item_id:window.location.pathname})})})}function fallbackCopyToClipboard(text,button){const textArea=document.createElement("textarea");textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999999px",textArea.style.top="-999999px",document.body.appendChild(textArea),textArea.focus(),textArea.select();try{document.execCommand("copy"),showShareFeedback(button,"Link copied!")}catch(err){showShareFeedback(button,"Copy failed")}document.body.removeChild(textArea)}function showShareFeedback(button,message){const originalText=button.querySelector(".share-text").textContent,textElement=button.querySelector(".share-text");textElement.textContent=message,button.style.pointerEvents="none",setTimeout(()=>{textElement.textContent=originalText,button.style.pointerEvents="auto"},2e3)}function initDonationAnimations(){const donationFloat=document.querySelector(".donation-float"),donationButtons=document.querySelectorAll(".donation-btn, .donation-cta-button");donationButtons.forEach(button=>{button.addEventListener("mouseenter",function(){this.style.transform="scale(1.05) translateY(-2px)"}),button.addEventListener("mouseleave",function(){this.style.transform="scale(1) translateY(0)"})});if(donationFloat){const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting?(donationFloat.style.opacity="0",donationFloat.style.pointerEvents="none"):(donationFloat.style.opacity="1",donationFloat.style.pointerEvents="auto")})});document.querySelectorAll(".donation-cta").forEach(cta=>observer.observe(cta))}}function initImageLazyLoading(){if("IntersectionObserver"in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.dataset.src&&(img.src=img.dataset.src,img.removeAttribute("data-src")),img.dataset.srcset&&(img.srcset=img.dataset.srcset,img.removeAttribute("data-srcset")),img.classList.remove("lazy"),imageObserver.unobserve(img)}})});document.querySelectorAll("img[data-src], img[data-srcset]").forEach(img=>{img.classList.add("lazy"),imageObserver.observe(img)})}}function initCircleAnimations(){const circles=document.querySelectorAll(".circle-item");0!==circles.length&&(circles.forEach((circle,index)=>{circle.style.opacity="0",circle.style.transform="scale(0.8)",circle.style.transition="opacity 0.6s ease, transform 0.6s ease",setTimeout(()=>{circle.style.opacity="1",circle.style.transform="scale(1)"},100*index)}),circles.forEach(circle=>{circle.addEventListener("mouseenter",function(){this.style.transform="scale(1.05)"}),circle.addEventListener("mouseleave",function(){this.style.transform="scale(1)"})}))}function initPostCardAnimations(){const postCards=document.querySelectorAll(".post-card");if(0===postCards.length)return;const cardObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting&&(entry.target.style.opacity="1",entry.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});postCards.forEach((card,index)=>{const rect=card.getBoundingClientRect();rect.top>window.innerHeight&&(card.style.opacity="0",card.style.transform="translateY(20px)",card.style.transition="opacity 0.6s ease, transform 0.6s ease"),cardObserver.observe(card)}),postCards.forEach(card=>{const image=card.querySelector(".post-card-image"),readMore=card.querySelector(".post-card-read-more");card.addEventListener("mouseenter",function(){if(image&&(image.style.transform="scale(1.05)"),readMore){const arrow=readMore.querySelector(".read-more-arrow");arrow&&(arrow.style.transform="translateX(4px)")}}),card.addEventListener("mouseleave",function(){if(image&&(image.style.transform="scale(1)"),readMore){const arrow=readMore.querySelector(".read-more-arrow");arrow&&(arrow.style.transform="translateX(0)")}})})}function initProgressAnimations(){const progressBars=document.querySelectorAll(".donation-progress-fill");if(0===progressBars.length)return;const progressObserver=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const progressBar=entry.target,targetWidth=progressBar.style.width;progressBar.style.width="0%",setTimeout(()=>{progressBar.style.width=targetWidth},200),progressObserver.unobserve(progressBar)}})},{threshold:.5});progressBars.forEach(bar=>{progressObserver.observe(bar)})}function initHeaderScroll(){const header=document.querySelector(".site-header");if(!header)return;let lastScrollY=window.scrollY,ticking=!1;function updateHeader(){const scrollY=window.scrollY;scrollY>100?header.classList.add("scrolled"):header.classList.remove("scrolled"),scrollY>lastScrollY&&scrollY>200?header.style.transform="translateY(-100%)":header.style.transform="translateY(0)",lastScrollY=scrollY,ticking=!1}function requestTick(){ticking||(requestAnimationFrame(updateHeader),ticking=!0)}window.addEventListener("scroll",requestTick)}function debounce(func,wait,immediate){let timeout;return function executedFunction(){const context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}function throttle(func,limit){let inThrottle;return function(){const args=arguments,context=this;inThrottle||(func.apply(context,args),inThrottle=!0,setTimeout(()=>inThrottle=!1,limit))}}window.ForestEdgeTheme={debounce:debounce,throttle:throttle}}();